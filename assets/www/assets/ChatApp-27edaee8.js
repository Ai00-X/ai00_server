import{f as L,r as g,o as c,c as k,a as t,w as n,e as d,t as y,j as T,k as A,F as S,l as B,u as o,m as M,g as C,n as D,d as v,i as x,_ as P,p as F,T as I,q,s as m,v as p,x as H}from"./index-c96191a9.js";import{h as w,C as O,u as N}from"./zh-cn-f1addd0d.js";const j={style:{"font-size":"16px"}},E={style:{"font-size":"12px"}},G=L({__name:"ChatMenu",setup(U){w.locale("zh-cn");const a=e=>(w.locale("zh-cn"),w(Number(e)).fromNow()),r=O(),i=N(),s=g(0),_=g(""),l=()=>{if(i.getChatting())return;const e=Date.now().toString(),f={id_name:e,title:"新的聊天"},b=Math.round(Math.random()*15),u=g({id:2,name:"AI",avatar:"/tou/"+b+".png"});r.addToChatList(f),s.value=r.getListnum()-1,i.setnowchat(e),_.value=e;const h={id:"_"+Math.random().toString(36).substring(2,11),user:u.value,text:"你好，我是你的AI助手。有什么问题或指令请尽管吩咐！",timestamp:new Date().getTime()};i.startHistory(h)},V=e=>{if(i.getChatting())return;s.value=e,i.setnowchat(r.getChatid(e).id_name),_.value=r.getChatid(e).id;const f=r.getChatid(e).history;i.setHistory(f)},$=e=>{i.getChatting()||(i.clearHistory(),r.removeChatList(e),r.getListnum()==0?l():e==i.getnowchat()&&V(0))};if(r.getListnum()==0)l();else for(let e=0;e<r.getListnum();e++)r.getChatid(e).id_name==i.getnowchat()&&V(e);return(e,f)=>{const b=M("perfect-scrollbar");return c(),k(S,null,[t(T,{color:"primary",block:"",class:"mb-4 w-full",onClick:l},{default:n(()=>[d(y(e.$t("chat.newchat")),1)]),_:1}),t(b,{ref:"target",id:"chat-m",class:"chat-m"},{default:n(()=>[t(A,{nav:"",class:"mt-2 pa-0",color:"primary"},{default:n(()=>[(c(!0),k(S,null,B(o(r).ids,(u,h)=>(c(),C(D,{key:u.id_name,class:"newbtn","active-class":"active-chat",title:a(u.id_name),link:"",active:o(s)===h,onClick:z=>V(h)},{title:n(()=>[t(v,{style:{"background-color":"rgba(255, 255, 255, 0)"}},{title:n(()=>[x("span",j,y(u.title),1)]),subtitle:n(()=>[x("span",E,y(a(u.id_name)),1)]),_:2},1024)]),append:n(()=>[t(T,{variant:"plain",size:"x-small",icon:"mdi-close",onClick:z=>$(u.id_name)},null,8,["onClick"])]),_:2},1032,["title","active","onClick"]))),128))]),_:1})]),_:1},512)],64)}}});const J=P(G,[["__scopeId","data-v-e6d009ac"]]),K={style:{"padding-top":"32px","padding-left":"5px"}},Q=L({__name:"ChatApp",setup(U){const a=N();a.setserverip(window.location.host);const r=g(!0);return r.value=a.getSettings(),(i,s)=>{const _=M("router-view");return c(),C(v,{class:"app-container pa-xl-8 pa-lg-8 pa-md-0 pa-sm-0"},{default:n(()=>[t(F,{border:"none",modelValue:o(a).Sidebar,"onUpdate:modelValue":s[0]||(s[0]=l=>o(a).Sidebar=l),class:"pa-2"},{default:n(()=>[x("div",K,[t(J)])]),_:1},8,["modelValue"]),t(v,{class:"main"},{default:n(()=>[t(_,null,{default:n(({Component:l})=>[t(I,{name:"fade"},{default:n(()=>[(c(),C(q(l)))]),_:2},1024)]),_:1})]),_:1}),o(a).settings&&o(a).Sidebar?(c(),C(v,{key:0,class:"rr","prepend-icon":"mdi-cog"},{title:n(()=>[d(y(i.$t("chat.settings")),1)]),text:n(()=>[t(m,null,{default:n(()=>[d(" Max_Tokens ")]),_:1}),t(p,{modelValue:o(a).Max_Tokens,"onUpdate:modelValue":s[1]||(s[1]=l=>o(a).Max_Tokens=l),color:"primary",min:100,max:8e3,step:100,"thumb-label":"always"},null,8,["modelValue"]),t(m,null,{default:n(()=>[d(" TOP_P ")]),_:1}),t(p,{modelValue:o(a).TOP_P,"onUpdate:modelValue":s[2]||(s[2]=l=>o(a).TOP_P=l),color:"primary",min:0,max:1,step:.1,"thumb-label":"always"},null,8,["modelValue","step"]),t(m,null,{default:n(()=>[d(" Temperature ")]),_:1}),t(p,{modelValue:o(a).Temperature,"onUpdate:modelValue":s[3]||(s[3]=l=>o(a).Temperature=l),color:"primary",min:0,max:2,step:.1,"thumb-label":"always"},null,8,["modelValue","step"]),t(m,null,{default:n(()=>[d(" Presence ")]),_:1}),t(p,{modelValue:o(a).Presence,"onUpdate:modelValue":s[4]||(s[4]=l=>o(a).Presence=l),color:"primary",min:0,max:2,step:.1,"thumb-label":"always"},null,8,["modelValue","step"]),t(m,null,{default:n(()=>[d(" Frequency ")]),_:1}),t(p,{modelValue:o(a).Frequency,"onUpdate:modelValue":s[5]||(s[5]=l=>o(a).Frequency=l),color:"primary",min:0,max:2,step:.1,"thumb-label":"always"},null,8,["modelValue","step"])]),_:1})):H("",!0)]),_:1})}}});const X=P(Q,[["__scopeId","data-v-6fa620ae"]]);export{X as default};
