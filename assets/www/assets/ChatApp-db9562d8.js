import{f as L,r as p,o as l,c as k,a as n,w as a,e as I,t as v,j as x,k as T,F as V,l as $,u as r,m as S,g as m,n as H,d as h,i as b,_ as N,p as M,T as F,q as j,s as q}from"./index-800d1cd9.js";import{h as w,C as E,u as z}from"./zh-cn-c18cb897.js";const U={style:{"font-size":"16px"}},G={style:{"font-size":"12px"}},J=L({__name:"ChatMenu",setup(A){w.locale("zh-cn");const o=t=>(w.locale("zh-cn"),w(Number(t)).fromNow()),e=E(),s=z(),i=p(0),_=p(""),c=p({id:2,name:"AI",avatar:"/tou/9.png"}),g=()=>{if(s.getChatting())return;const t=Date.now().toString(),u={id_name:t,title:"新的聊天"};e.addToChatList(u),i.value=e.getListnum()-1,s.setnowchat(t),_.value=t;const C={id:"_"+Math.random().toString(36).substring(2,11),user:c.value,text:"你好，我是你的AI助手。有什么问题或指令请尽管吩咐！",timestamp:new Date().getTime()};s.startHistory(C)},f=t=>{if(s.getChatting())return;i.value=t,s.setnowchat(e.getChatid(t).id_name),_.value=e.getChatid(t).id;const u=e.getChatid(t).history;s.setHistory(u)},B=t=>{s.getChatting()||(s.clearHistory(),e.removeChatList(t),e.getListnum()==0?g():t==s.getnowchat()&&f(0))};if(e.getListnum()==0)g();else for(let t=0;t<e.getListnum();t++)e.getChatid(t).id_name==s.getnowchat()&&f(t);return(t,u)=>{const C=S("perfect-scrollbar");return l(),k(V,null,[n(x,{color:"primary",block:"",class:"mb-4 w-full",onClick:g},{default:a(()=>[I(v(t.$t("chat.newchat")),1)]),_:1}),n(C,{ref:"target",id:"chat-m",class:"chat-m"},{default:a(()=>[n(T,{nav:"",class:"mt-2 pa-0",color:"primary"},{default:a(()=>[(l(!0),k(V,null,$(r(e).ids,(d,y)=>(l(),m(H,{key:d.id_name,class:"newbtn","active-class":"active-chat",title:o(d.id_name),link:"",active:r(i)===y,onClick:D=>f(y)},{title:a(()=>[n(h,{style:{"background-color":"rgba(255, 255, 255, 0)"}},{title:a(()=>[b("span",U,v(d.title),1)]),subtitle:a(()=>[b("span",G,v(o(d.id_name)),1)]),_:2},1024)]),append:a(()=>[n(x,{variant:"plain",size:"x-small",icon:"mdi-close",onClick:D=>B(d.id_name)},null,8,["onClick"])]),_:2},1032,["title","active","onClick"]))),128))]),_:1})]),_:1},512)],64)}}});const K=N(J,[["__scopeId","data-v-db33a96b"]]),O={style:{"padding-top":"32px","padding-left":"5px"}},P=L({__name:"ChatApp",setup(A){const o=z();o.setserverip(window.location.host);const e=p(!0);return e.value=o.getSettings(),(s,i)=>{const _=S("router-view");return l(),m(h,{class:"app-container pa-xl-8 pa-lg-8 pa-md-0 pa-sm-0"},{default:a(()=>[n(M,{border:"none",modelValue:r(o).Sidebar,"onUpdate:modelValue":i[0]||(i[0]=c=>r(o).Sidebar=c),class:"pa-2"},{default:a(()=>[b("div",O,[n(K)])]),_:1},8,["modelValue"]),n(h,{class:"main"},{default:a(()=>[n(_,null,{default:a(({Component:c})=>[n(F,{name:"fade"},{default:a(()=>[(l(),m(j(c)))]),_:2},1024)]),_:1})]),_:1}),r(o).settings&&r(o).Sidebar?(l(),m(h,{key:0,class:"rr"})):q("",!0)]),_:1})}}});const W=N(P,[["__scopeId","data-v-39417848"]]);export{W as default};
